$(function(){$(".citation-widget button.choose-style").on("click",function(){ $(".citation-widget button.choose-style").removeClass("active");$(this).addClass("active");$(".citation-widget .style").removeClass("active");$(".citation-widget .style."+$(this).data("style")).addClass("active"); $(".citation-widget button.copy-citation").removeClass("success").removeClass("error").text("Copy Citation");$(".citation-widget .popup .copied-flash").hide();});$(".citation-widget button.copy-citation").on("click",function(){var currentCitation=$(".citation-widget .style.active").text();if(copyTextToClipboard(currentCitation)){$(this).addClass("success").html("&#10003; Copied");if($(".citation-widget button.choose-style.active").data("style")!="Chicago"){$(".citation-widget .popup .copied-flash").show();}}else{$(this).addClass("error").html("X Unable to Copy.");}}); $(".citation-widget").on("mouseenter touchstart",function(e){dataLayer.push({'event':'citation open'});});});function copyTextToClipboard(text){dataLayer.push({'event':'citation copy button'});var textArea=document.createElement("textarea"); textArea.style.position='fixed';textArea.style.top=0;textArea.style.left=0;textArea.style.width='2em';textArea.style.height='2em';textArea.style.padding=0;textArea.style.border='none';textArea.style.outline='none';textArea.style.boxShadow='none';textArea.style.background='transparent'; textArea.value=text;document.body.appendChild(textArea);textArea.select();try{var successful=document.execCommand('copy');}catch(err){console.log("Oops, unable to copy.");}
document.body.removeChild(textArea);return successful;}